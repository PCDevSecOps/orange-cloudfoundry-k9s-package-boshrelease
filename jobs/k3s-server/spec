---
name: k3s-server

packages:
- k3s
- k3s-images
templates:
  config/bpm.yml: config/bpm.yml
  bin/pre-start.erb: bin/pre-start
  bin/post-start.erb: bin/post-start  
  bin/pre-stop.erb: bin/pre-stop
  bin/post-deploy.erb: bin/post-deploy
  bin/ctl.erb: bin/ctl
  config/registries.yaml.erb: config/registries.yaml
  config/registry.ca.erb: config/registry.ca
  config/registry.cert.erb: config/registry.cert
  config/registry.key.erb: config/registry.key 

# Documentation https://bosh.io/docs/links.html
# Tutorial      https://gist.github.com/Amit-PivotalLabs/c39528248b8cdc4ba8e347f8aa68abb6
consumes: []

provides:
- name: k3s-server
  type: k3s-server
  properties:
  - token

properties:
  token:
    description: cluster token 
    default: 8080

  registry.mirrors.endpoint:
    description: private registry endpoint
    default: http://localhost:5000

	registry.mirrors.auth.username:
    description: private registry user

	registry.mirrors.auth.password:
    description: private registry password

	registry.mirrors.tls.cert:
    description: private registry certificate

	registry.mirrors.tls.key:
    description: private registry private key

	registry.mirrors.tls.ca:
    description: private registry ca
